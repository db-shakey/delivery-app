<ion-view class="item-search">
  	<ion-nav-title>
    	<label class="item item-input header-input">
    		<i class="icon ion-search placeholder-icon"></i>
    		<input type="search" placeholder="Search" id="search" ng-model="searchText" ng-change="searchChange(searchText)" ng-trim="true" ng-model-options="{ debounce: 500 }" ng-disabled="disableSearch()" ng-focus="searchFocus" autofocus>
  		</label>
   	</ion-nav-title>
    <ion-nav-buttons side="right">
        <button class="button button-icon button-clear ion-android-more-vertical m-r-sm" ng-click="openSubmenu()"></button>
    </ion-nav-buttons>
   	<ion-content overflow-scroll="true" lazy-scroll>
      <ion-list class="search-results">
        <div class="list search-results">
          <div ng-repeat="(key, value) in results | groupBy: 'Name' | orderBy:'Name':true">
            <div class="item item-divider">
              {{key}}
            </div>
            <ion-item class="item item-thumbnail-left" href="" ng-repeat="item in value" ng-click="goToProductDetails(item.Id)">
              <img image-lazy-src="{{item.Image_Source__c}}" image-lazy-loader="android" image-lazy-distance-from-bottom-to-load="200"/>
              <h3>{{item.ProductName}}</h3>
              <p>{{item.Family}}</p>
              <p>{{item.Brand__c}}</p>
            </ion-item>
        </div>

        <div class="text-center" ng-if="!hasMore && results">
          End of list
        </div>
      </ion-list>

      <div class="middle-box text-center" ng-if="(!results || results.length == 0) && !disableSearch()">
            <i class="ion-ios-information-empty"></i>
            <h3 class="font-bold" ng-if="searchText">Search returned no results.</h3>
            <h3 class="font-bold" ng-if="!searchText">Use the search input at the top to find results.</h3>
      </div>
      <div class="middle-box text-center" ng-if="disableSearch()">
            <i class="ion-search"></i>
            <h3 class="font-bold">Loading Search...</h3>
      </div>

      <ion-infinite-scroll icon="ion-loading-c" on-infinite="loadMore()" ng-if="hasMore && results && results.length > 0"></ion-infinite-scroll>
   	</ion-content>

</ion-view>
